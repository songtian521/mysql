# 02_MySql数据类型

![](C:\Users\宋天\Desktop\mysql\img\mysql数据类型.png)

mysql数据类型基本分为：数字型，时间型，字符型。

其中，在sql语句中，数字型数据不需要单引号引起来，而时间型和字符型数据需要引号引起来



## 1.整数型

- 整型数据类型包括
  - tinyint 微整型
  - smallint 小整型
  - mediumint 中等型
  - int 整型
  - bigint 大整型

| **类型**  | **所占空间****(字节)** | **带符号**           | **无符号**          |            |                      |
| --------- | ---------------------- | -------------------- | ------------------- | ---------- | -------------------- |
|           |                        | **最小值**           | **最大值**          | **最小值** | **最大值**           |
| tinyint   | 1                      | -128                 | 127                 | 0          | 255                  |
| smallint  | 2                      | -32768               | 32767               | 0          | 65535                |
| mediumint | 3                      | -8388608             | 8388607             | 0          | 16777215             |
| int       | 4                      | -2147483648          | 2147483647          | 0          | 4294967295           |
| bigint    | 8                      | -9223372036854775808 | 9223372036854775807 | 0          | 18446744073709551615 |

- 默认整型类型是带符号的，即可以有正负值，如：

  ```sql
  create table php(num1 int, num2 tinyint);
  ```

  此时，num1和num2中都可以存储负数，但是不能超出类型范围

- 不带符号的整数类型设置：

  ```sql
  create table php(num1 int unsigned,num2 tinyint unsigned);
  ```

## 2.小整形

概念：小数类型分为浮点小数和定点小数

1. 浮点小数

   概念：浮点小数是“不精确的小数”，摆阔float和double。

   - float

     占用4字节的存储空间，可以成为“单精度浮点数”，约7位有效数字

   - double

     占用8位字节，称为“双精度浮点数”，约17位有效数字

2. 定点小数

   概念：定点小数是“精确的小数”，它通过内部技巧，突破了“有些小数无法用二进制精确表示“的局限

   其设定方式通常为`decimal(M,D)`，其中M表示该小数的总有效位数（最大65位），D表示该小数的小数点后的位数。

   - 演示：定义三个字段分别为float、double、decimal、类型并插入"123456789.123456789123456789",显示结果。

     ```sql
     create table xiaoshu(x1 float,x2 double,x3 decimal(23,14));
     insert into xiaoshu (x1,x2,x3) values (123456789.123456789123456789,13456789.123456789123456789,123456789.123456789123456789);
     select * from xiaoshu;
     --输出的数据值为：123457000	13456789.12345679	123456789.12345678912346
     
     ```

     得出结论：folat为6为有效数字，double为17为有效数字，decimal的有效数字按照设置而定

3. 数据类型选择示例

   - 设置一个字段为年龄：应该采用`tinyint unsigned`；
   - 设置一个人的工资：`double unsigned ，`decimal unsigned`
   - 设置全国人口的编号：`int unsigned`；



## 3.日期时间型

日期时间类型包括如下几种：

- date类型

  表示日期，格式为：`0000-00-00`

- time 类型

  表示时间，格式为：`00:00:00`

- datetime 类型

  表示时间，格式为：`0000-00-00 00:00:00`

- timestamp 类型

  表示“时间戳”，其实就是一个整数数字，该数字是从“时间起点“到现在为止的”秒数“，时间起点为：1970-1-1 0:0:0

  **注：以下并未验证成功，原因未知**（猜测：版本原因）

  timestamp 类型的字段，无需插入数据，而是会自动获取当前的时间日期时间（表示当前时刻），而且，此类型字段会在数据被更新时，同样自动取得当前的日期时间（表示修改的时刻）。

  总结：该类型在 `insert`和`update`某行数据的时候，能够自动获取当前时间

- year 类型

  表示年份，格式为：`0000`

注意：

- 时间类型的字面值，通常使用单引号引起来
- timestamp类型在一个表中只能用于一个字段

now函数的使用：获取当前时间

```sql
insert into shijian(t_time, t_date, t_datetime,t_timestamp, t_year) values('12:12:12','2018-10-9','2018-9-8 12:20:6',now(),'2019');

select * from shijian;
--输出时间 12:12:12	2018-10-09	2018-09-08 12:20:06	2019-10-08 10:58:03	2019
```

## 4.字符串型

字符串类型包括：char、varchar、text、enum、set

1. 定长字符char和变长字符varchar

   - 定长字符类型char

     概念：使用与存储的字符长度为固定长度的字符，如：中国的邮政编码，身份证号，手机号等

     设定形式：`字段名称 char(字符个数)`

     特点：

     - 存储的字长度固定，最长可设定255个字符
     - 如果实际写入的字符不足设定长度，内部会自动使用空格填充到设定的长度
     - 相对于varchar类型，其存取速度更快

   - 变长字符类型varchar

     概念：适用于存储字符长度经常不确定的字符，如：姓名，标题，内容等大多数场合的字符

     设定形式：`字段名称 carchar(字符个数)`

     特点

     - 存储的字符长度是写入的实际长度，但不超过设定的长度。最长可设定为65532（字节）

       注：由于其最长的限制是字节数，因此存储中文和英文的实际字符个数是不同的

       - 英文：一个字符站一个字节
       - 中文（gbk编码）：一个字符占2个字节
       - 中文（utf8编码）：一个字符占3个字节

     - 如果实际写入的字符不足设定的长度，就按照实际的长度存储

     - 相对于插入字符串，其存取的速度相对较慢

2. text长文本类型

   概念：适用于存储“较长的文本内容“，比如文章。最长可存储65535个字符

   如果还需要存储更长的文本，可以使用`mediumtext(1600万左右)`或`longtext(40亿左右)`

   设定形式：`字段名称 text`

   - text类型的字段不能设置默认值
   - text类型虽然是字符类型但不能设置长度
   - text类型的数据不存在行中

3. enum和set型

   概念：enum类型和set类型都是用于存储“有给定值的可选字符“，比如类似表单中的单选，多选，下拉列表等

   - enum类型（单选类型/枚举类型）

     概念：enum类型通常 用于存储表单中的“单选项”的值

     设定形式：`enum('选项值1','选项值2',....)`

     这些选项值都对应了相应的索引值，类似索引数组而定下标，但是是从1开始的。

     即：这些选项的索引值分别为：1,2,3,4....

     注：enum类型最多可设定65535个选项

     - 示例

       ```sql
       create table tab1(id int,edu('小学','中学','高中'));
       insert into tab1(id,edu)values(1,'大学');
       或
       insert into tabl (id,edu) values(1,2);--表示中学
       ```

   - set类型（多选类型）

     概念：set类型常用语存储表单中的“多选项“的值

     设定形式：`set('选项值1','选项值2',....)`

     这些选项值都对应了相应的索引值，其索引从1开始，并**依次翻倍**。

     即：这些选项的索引值分别为：1,2,4,8,16,....(其实就是2的N次幂)

     注：set类型最多可设定 64个选项值

     - 示例

       ```sql
       create  table  tab2 (aihao(‘篮球’, ‘排球’, ‘足球’, ‘中国足球’ )  ); --对应索引值为1,2,4,8
       insert  into  tab2( aihao ) values ( ‘篮球’ );
       或：
       insert  into  tab2 ( aihao ) values ( ‘篮球,排球’ );
       或：
       insert  into  tab2 ( aihao ) values ( ‘篮球,足球,排球’ );
       或：
       insert  into  tab2 ( aihao ) values ( 2 );	--表示排球(2)
       或：
       insert  into  tab2 ( aihao ) values ( 3);		--表示“篮球,排球”(1+2)
       或：
       insert  into  tab2 ( aihao ) values ( 7);		--表示“篮球,排球,足球”(1+2+4)
       
       ```


## 5.列属性

概念：列属性是指定义或创建一个列的时候，可以给列额外增加的“附加特性“。

格式：`create table 表名(列名 列类型 [列属性])`

说明：

- 一个类可以有多个列属性
- 多个列属性空格隔开即可

列属性包括：

- null，not null

  设定为空，或非空，表明该列数据是否可为空值（null）

- default

  用于设定默认值（不给值或给空值null并not null，就会自动使用该值），使用格式：`defalut 默认值`

- primary key

  - 用于设定主键
  - 主键就是一个表中数据的关键值，通过该关键值就可以找到该特定的数据行
  - 一个表的主键值不能重复（相等），比如文章表中的文章编号ID等
  - 主键字段必须有值（不能为空）
  - 一个表只能有一个主键（但一个主键可以是1个字段或2个以上的字段联合构成）

- auto_increment

  - 用于设定一个整数字段的值是自增长的，通常用于一个表中的数据行的标号（如：文章编号）
  - 默认情况下自增长值从1开始
  - 一个表只能设定一个字段为自增长特性

- unique key

  - 用于设定唯一键的特性
  - 唯一键表示一个表中的某字段值是唯一的，不重复的
  - 唯一键有点类似primay key ，但其值可以为空
  - 一个表中可以有多个唯一键

- comment

  - 用于设定字段的说明性内容，类似注释
  - 使用形式：`comment '文字内容'`



联合主键：

概念：一个表中有多个主键

格式：

```sql
create table aaa(
	id int,
	name varchar(4),
	primary key(id,name)
);
```

## 6.实体与实体的关系

基本概念：

实体（Entity）：

- 指现实中具体存在的可指称的“某物”
- 一个表中的一行数据实际就是指某物的描述性数据集、，所以一行数据就是一个实体
- 有时实体也指整个表（因为表是由多个实体构成的）。

实体间关系（relationship）：

- 是指不同实体数据之间的关系，很多时候就是指表和表之间的关系
- 实体间关系有：一对一关系，一对多关系，多对多关系

如图：

![](C:\Users\宋天\Desktop\mysql\img\实体关系图.png)



### 6.1一对一关系

概念：表示一个表跟另一个表之间的数据之间一对一的关系。如图

![](C:\Users\宋天\Desktop\mysql\img\一对一关系.png)

现实案例：

学校表：id、校名、地址、**校长id**

校长表：**id**、姓名、年龄、学历

此时，学校表和校长表就是一对一关系：

一个学校只能有一个校长，一个校长只能负责一个学校

### 6.2一对多关系

概念：表示一个表跟另一个表之间的数据之间是一对多的关系。如图：

![](C:\Users\宋天\Desktop\mysql\img\一对多关系.png)

 现实案例 ：

学校表：**id**、校名、地址、校长id

班级表：id、班级名称、教室号、**所属学校id**

此时，学校表和班级表就是一对多的关系：

一个学校可以有多个班级，一个班级只能属于一个学校。

### 6.3多对多关系

概念：表示一个表跟另一个表之间的数据是多对多的关系，如图：

![](C:\Users\宋天\Desktop\mysql\img\多对多关系.png)

现实案例：

课程表：id、课程名称、课时数、学分数

学生表：id、姓名、性别、年龄、所属班级id

此时，课程表和班级表就是多对多关系：

一个课程可以被多个学生学习

一个学生也可以学多个课程

注：如上情况 ，通常还需要建立一个“中间表“，以记录所有学生各自选修了哪些课程，如图

| 学生id | 课程id | 选修时间 |
| ------ | ------ | -------- |
| 1      | 1      | 2017-8-9 |
| 1      | 3      | 2017-8-9 |
| 1      | 4      | 2017-9-1 |
| 2      | 1      | 2017-8-4 |
| 2      | 2      | 2017-8-4 |
| 2      | 3      | 2017-9-1 |
| 3      | 3      | 2018-6-9 |
| ...    | ...    | ...      |

